<div *ngIf="product; else notFoundTemplate" class="container my-5 text-center">

  <div class="row g-4 align-items-start justify-content-center">
    
    <div class="col-12 col-md-6 text-center">
      <img [src]="product.imagePath[0]" [alt]="product.name" class="img-fluid rounded shadow mb-3 main-img">
    </div>

    
    <div class="col-12 col-md-6">
      <h2 class="fw-bold mb-3">{{ product.name }}</h2>
      <p class="text-muted mb-3">{{ product.description }}</p>

      <div class="d-flex align-items-center justify-content-center mb-3">
        <span class="fs-4 text-danger fw-bold">${{ product.price }}</span>
        <span *ngIf="product.discount && product.discount > 0"
              class="text-muted text-decoration-line-through ms-2">
          ${{ product.price + product.discount }}
        </span>
      </div>

      
      <div class="mb-2">
        <label class="form-label me-2 fw-bold">Color:</label>
        <span *ngFor="let color of product.avaliableColor"
              class="color-circle me-1"
              [ngStyle]="{'background-color': color}"
              [class.selected]="selectedColor === color"
              (click)="selectColor(color)">
        </span>
      </div>

      
      <div class="mb-3">
        <label class="form-label me-2 fw-bold">Size:</label>
        <select class="form-select w-auto d-inline-block" [(ngModel)]="selectedSize">
          <option *ngFor="let size of product.availableSizes" [value]="size">{{ size }}</option>
        </select>
      </div>

      
      <div class="d-flex align-items-center justify-content-center mb-4">
        <button class="btn btn-dark btn-lg rounded-pill px-4 me-3" (click)="addToCart()">
          Add to Cart
        </button>

        <button class="btn-like btn btn-lg rounded-circle p-2" (click)="toggleFavorite()">
          <i class="fas fa-heart"></i>
        </button>
      </div>
    </div>
  </div>

  
  <div class="mt-5" *ngIf="comments.length">
    <h4 class="fw-bold mb-3">Reviews</h4>
    <div *ngFor="let comment of comments" class="review-box p-3 border rounded mb-3 shadow-sm text-start">
      <div class="d-flex justify-content-between align-items-center mb-1">
        <strong>{{ comment.name }}</strong>
        <span class="text-warning">
          <ng-container *ngFor="let star of getStarsArray(comment.rating)">
            <i *ngIf="star === 'full'" class="fas fa-star"></i>
            <i *ngIf="star === 'empty'" class="far fa-star"></i>
          </ng-container>
        </span>
      </div>
      <p class="mb-0 text-muted">{{ comment.text }}</p>
    </div>
  </div>

  
  <div class="mt-5" *ngIf="youMightLike.length">
    <h4 class="fw-bold mb-3">You Might Also Like</h4>
    <div class="row g-3">
      <div class="col-6 col-md-3" *ngFor="let item of youMightLike">
        <div class="card h-100 text-center shadow-sm">
          <img [src]="item.imagePath[0]" class="card-img-top" [alt]="item.name">
          <div class="card-body">
            <h6 class="card-title">{{ item.name }}</h6>
            <p class="mb-1 text-danger fw-bold">${{ item.price }}</p>
            <button class="btn btn-outline-dark btn-sm w-100">View</button>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<ng-template #notFoundTemplate>
  <div class="text-center my-5">
    <p class="fs-4 text-danger">‚ùå Product not found</p>
  </div>
</ng-template>
